# 讨论纪要

## 目标
支持快速方便在云上部署的数据处理的框架，会包括数据收点，数据的离线和实时处理，下一步会延伸到埋点sdk以及可视化

### 问题收集

#### 一、前端日志上报失败或者滞后，出现时间戳不准的情况
初始化的时候，会强制和后端校正一次时间，计算出本地时间跟服务器时间的offset

#### 二、会话日志
场景：一次app激活

#### 三、收点服务
1 接口设计

2 如何实现可靠传送

3 已接收的请求如何确保成功发上kafka（如果写本地文件就没这回事了）

#### 四、日志类型，面向统计对象
1 平台级（容忍丢失）

2 分类级别（容忍丢失）

3 客户级别（ToB）（低容忍）

4 个体级别（C端 / ToB的终端用户）（实时精确）

类型4案例：

1.端到端的全流程跟踪，用于在线定位问题

2.将这些用户事件数据作为详细的产品特性

#### 埋点

第一层境界：代码埋点

第二层境界： 框架式埋点

第三层境界：无埋点

通过流量采集发到本机的http/UDP网络流量,对流量进行重组，重组为http请求或其他标准日志格式，同时可以将满足特定特征的http日志进行进一步加工，解析为业务行为的标准信息。

参考：https://www.zhihu.com/question/46672370

### 备忘
- json通用事件日志规范

Common Event Expressiong
https://cee.mitre.org/language/0.6/CEE_Common_Log_Syntax-JSON-v0.6.html

- 神策数据格式

https://manual.sensorsdata.cn/sa/latest/数据格式-7545142.html

- 前端日志收集思路

https://blog.csdn.net/weixin_34413357/article/details/91370904